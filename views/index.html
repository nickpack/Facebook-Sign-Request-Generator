<style type="text/css">
    .com { color: #93a1a1; }
    .lit { color: #195f91; }
    .pun, .opn, .clo { color: #93a1a1; }
    .fun { color: #dc322f; }
    .str, .atv { color: #D14; }
    .kwd, .linenums .tag { color: #1e347b; }
    .typ, .atn, .dec, .var { color: teal; }
    .pln { color: #48484c; }
    
    .prettyprint {
      padding: 8px;
      background-color: #f7f7f9;
      border: 1px solid #e1e1e8;
    }
    .prettyprint.linenums {
      -webkit-box-shadow: inset 40px 0 0 #fbfbfc, inset 41px 0 0 #ececf0;
         -moz-box-shadow: inset 40px 0 0 #fbfbfc, inset 41px 0 0 #ececf0;
              box-shadow: inset 40px 0 0 #fbfbfc, inset 41px 0 0 #ececf0;
    }
    
    /* Specify class=linenums on a pre to get line numbering */
    ol.linenums {
      margin: 0 0 0 33px; /* IE indents via margin-left */
    } 
    ol.linenums li {
      padding-left: 12px;
      color: #bebec5;
      line-height: 18px;
      text-shadow: 0 1px 0 #fff;
    }
</style>
<div class="container">
    <header class="jumbotron subhead" id="overview">
        <h1>Facebook signed request generator</h1>
        <p class="lead">Create fb signed requests at your will.</p>
    </header>
    <div class="row">
        <form class="well" action="/" method="post" id="generateSignature">
            <label>App Secret Key</label>
            <input name="secretKey" id="secretKey" type="text" class="span3" placeholder="9153441254b5f4e5a03f..." value="<%= secretKey %>"> <span class="help-inline">Don't know where it is? You will find it  <a href="https://developers.facebook.com/apps">here</a>.</span><br/>
            <label>Payload</label>
            <textarea name="payload" class="input-xlarge" id="payload" rows="3" placeholder="{ 'algorithm': 'HMAC-SHA256', payload = 'hello world' }"><%= payload %></textarea> <span class="help-inline">The payload you wish to sign and encode, it must be a valid json object.</span><br/>
            </label>
            <button type="submit" class="btn">Submit</button>
        </form>
        <% if(errored) { %>
        <div class="alert alert-error">
            <strong>Oh snap!</strong> <%= jsonPayload %>
        </div>
        <% } %>
        <% if (!errored && jsonPayload) { %>
        <div class="alert alert-success">
            <strong>Success!</strong> The signed payload is below.
        </div>
        <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span style="color:black">Test against facebook signed request echo tool <a href="http://developers.facebook.com/tools/echo?signed_request=<%= jsonPayload %>">here</a>.</span></li><li class="L1"><span style="color:black;"><%= jsonPayload %></span></li></ol></pre>
        <% } %>
    </div>
    <hr>
    <footer>
        <p>&copy; dmportella 2012</p>
    </footer>
</div>